---
title: Estudo de caso-HoloTour
description: O HoloTour para Microsoft HoloLens fornece Tours pessoais 3D de imersão de locais de icônico em todo o mundo. Esse estudo de caso examinará o processo de captura e criação do conteúdo usado para HoloTour.
author: dannyaskew
ms.author: daaske
ms.date: 03/21/2018
ms.topic: article
keywords: HoloTour, HoloLens, realidade misturada do Windows
ms.openlocfilehash: 9908327a1b8e70eef73d3f98adb7c75615e8e098
ms.sourcegitcommit: 09599b4034be825e4536eeb9566968afd021d5f3
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/03/2020
ms.locfileid: "91675258"
---
# <a name="case-study---holotour"></a><span data-ttu-id="0972b-105">Estudo de caso-HoloTour</span><span class="sxs-lookup"><span data-stu-id="0972b-105">Case study - HoloTour</span></span>

<span data-ttu-id="0972b-106">O HoloTour para Microsoft HoloLens fornece Tours pessoais 3D de imersão de locais de icônico em todo o mundo.</span><span class="sxs-lookup"><span data-stu-id="0972b-106">HoloTour for Microsoft HoloLens provides immersive 3D personal tours of iconic locations around the world.</span></span> <span data-ttu-id="0972b-107">Como os designers, artistas, produtores, designers de áudio e desenvolvedores que trabalham neste projeto foram encontrados, criar uma renderização 3D realmente conhecida de um local conhecido leva a uma mistura exclusiva de criativo e wizardry tecnológicos.</span><span class="sxs-lookup"><span data-stu-id="0972b-107">As the designers, artists, producers, audio designers, and developers working on this project found out, creating a convincingly real 3D rendering of a well-known location takes a unique blend of creative and technological wizardry.</span></span> <span data-ttu-id="0972b-108">Esse estudo de caso examinará o processo de captura e criação do conteúdo usado para HoloTour.</span><span class="sxs-lookup"><span data-stu-id="0972b-108">This case study will walk through the process of capturing and creating the content used for HoloTour.</span></span>

## <a name="the-tech"></a><span data-ttu-id="0972b-109">O Tech</span><span class="sxs-lookup"><span data-stu-id="0972b-109">The tech</span></span>

<span data-ttu-id="0972b-110">Com o HoloTour, queríamos possibilitar que as pessoas visitassem alguns dos destinos mais incríveis do mundo, como o [ruins da Machu Picchu](https://en.wikipedia.org/wiki/Machu_Picchu) no Peru ou o dia moderno [Piazza Navona](https://en.wikipedia.org/wiki/Piazza_Navona) na Itália — diretamente de suas próprias salas de vida.</span><span class="sxs-lookup"><span data-stu-id="0972b-110">With HoloTour, we wanted to make it possible for people to visit some of the world’s most amazing destinations—like the [ruins of Machu Picchu](https://en.wikipedia.org/wiki/Machu_Picchu) in Peru or the modern day [Piazza Navona](https://en.wikipedia.org/wiki/Piazza_Navona) in Italy—right from their own living rooms.</span></span> <span data-ttu-id="0972b-111">Nossa equipe fez o objetivo da HoloTour para "fazer você sentir como você está realmente lá".</span><span class="sxs-lookup"><span data-stu-id="0972b-111">Our team made it the goal of HoloTour to “make you feel like you’re really there.”</span></span> <span data-ttu-id="0972b-112">A experiência precisava ser mais do que apenas imagens ou vídeos.</span><span class="sxs-lookup"><span data-stu-id="0972b-112">The experience needed to be more than just pictures or videos.</span></span> <span data-ttu-id="0972b-113">Aproveitando a tecnologia exclusiva de exibição, controle e áudio do HoloLens, acreditamos que poderíamos transportar virtualmente para outro lugar.</span><span class="sxs-lookup"><span data-stu-id="0972b-113">By leveraging the unique display, tracking, and audio technology of HoloLens we believed we could virtually transport you to another place.</span></span> <span data-ttu-id="0972b-114">Precisamos capturar o atenções, sons e a geometria tridimensional de cada local que visitamos e, em seguida, recriá-lo em nosso aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0972b-114">We would need to capture the sights, sounds, and three-dimensional geometry of every location we visited and then recreate that within our app.</span></span>

<span data-ttu-id="0972b-115">Para fazer isso, precisávamos de um rig de câmera de 360 ° com captura de áudio direcional.</span><span class="sxs-lookup"><span data-stu-id="0972b-115">In order to do this, we needed a 360° camera rig with directional audio capture.</span></span> <span data-ttu-id="0972b-116">Ele precisava capturar uma resolução extremamente alta, para que a seqüência de imagens pareça nítida quando reproduzida em um HoloLens e as câmeras precisassem ser posicionadas em conjunto para minimizar os artefatos de costura.</span><span class="sxs-lookup"><span data-stu-id="0972b-116">It needed to capture at extremely high resolution, so that the footage would look crisp when played back on a HoloLens and the cameras would need to be positioned close together in order to minimize stitching artifacts.</span></span> <span data-ttu-id="0972b-117">Queríamos cobertura esférica completa, não apenas ao longo do horizonte, mas acima e abaixo também.</span><span class="sxs-lookup"><span data-stu-id="0972b-117">We wanted full spherical coverage, not just along the horizon, but above and below you as well.</span></span> <span data-ttu-id="0972b-118">O Rig também precisava ser portátil para que possamos fazer tudo isso por todo o mundo.</span><span class="sxs-lookup"><span data-stu-id="0972b-118">The rig also needed to be portable so that we could take it all over the world.</span></span> <span data-ttu-id="0972b-119">Avaliamos as opções disponíveis no mercado e percebemos que elas simplesmente não eram boas para concretizar nossa visão – devido à resolução, ao custo ou ao tamanho.</span><span class="sxs-lookup"><span data-stu-id="0972b-119">We evaluated available off-the-shelf options and realized they simply weren’t good enough to realize our vision – either because of resolution, cost, or size.</span></span> <span data-ttu-id="0972b-120">Se não pudermos encontrar um rig de câmera que satisfaça nossas necessidades, teríamos que criar um por si mesmo.</span><span class="sxs-lookup"><span data-stu-id="0972b-120">If we couldn’t find a camera rig that satisfied our needs, we would have to build one ourselves.</span></span>

### <a name="building-the-rig"></a><span data-ttu-id="0972b-121">Compilando o Rig</span><span class="sxs-lookup"><span data-stu-id="0972b-121">Building the rig</span></span>

<span data-ttu-id="0972b-122">A primeira versão — feita desde papel, velcro, fita de dutos e 14 câmeras GoPros — era algo que MacGyver seria orgulho.</span><span class="sxs-lookup"><span data-stu-id="0972b-122">The first version—made from cardboard, Velcro, duct tape, and 14 GoPro cameras—was something MacGyver would have been proud of.</span></span> <span data-ttu-id="0972b-123">Depois de examinar tudo, desde soluções de low-end até Rigs de fabricação personalizadas, as câmeras GoPro foram, na verdade, a melhor opção para nós porque eram pequenas, acessíveis e tinham um armazenamento de memória fácil de usar.</span><span class="sxs-lookup"><span data-stu-id="0972b-123">After reviewing everything from low-end solutions to custom manufactured rigs, GoPro cameras were ultimately the best option for us because they were small, affordable, and had easy-to-use memory storage.</span></span> <span data-ttu-id="0972b-124">O fator forma pequeno era especialmente importante porque permitia posicionar as câmeras com muita proximidade – quanto menor a distância entre as câmeras, menor será o tamanho dos artefatos de costura.</span><span class="sxs-lookup"><span data-stu-id="0972b-124">The small form factor was especially important because it allowed us to place cameras fairly close together—the smaller the distance between cameras, the smaller the stitching artifacts will be.</span></span> <span data-ttu-id="0972b-125">Nosso único arranjo de câmera nos permitiu obter cobertura completa da esfera, *além* de sobreposição suficiente para alinhar as câmeras de forma inteligente e suavizar alguns artefatos durante o processo de junção.</span><span class="sxs-lookup"><span data-stu-id="0972b-125">Our unique camera arrangement allowed us to get full sphere coverage *plus* enough overlap to intelligently align cameras and smooth out some artifacts during the stitching process.</span></span>

<span data-ttu-id="0972b-126">Tirar proveito dos recursos de [som espaciais](../design/spatial-sound.md) no HoloLens é essencial para criar uma experiência de imersão realmente real.</span><span class="sxs-lookup"><span data-stu-id="0972b-126">Taking advantage of the [spatial sound](../design/spatial-sound.md) capabilities on HoloLens is critical to creating a convincingly real immersive experience.</span></span> <span data-ttu-id="0972b-127">Usamos uma matriz de quatro microfone situada debaixo das câmeras no Tripod, que capturariam o som da localização de nossa câmera em quatro direções, fornecendo-nos informações suficientes para criar sons espaciais em nossas cenas.</span><span class="sxs-lookup"><span data-stu-id="0972b-127">We used a four-microphone array situated beneath the cameras on the tripod, which would capture sound from the location of our camera in four directions, giving us enough information to create spatial sounds in our scenes.</span></span>

![Nossa câmara de câmera de 360 ° configurada para filming fora do Pantheon.](images/camera-pantheon-200px.png)

<span data-ttu-id="0972b-129">Nossa câmara de câmera de 360 ° configurada para filming fora do Pantheon.</span><span class="sxs-lookup"><span data-stu-id="0972b-129">Our 360° camera rig set up for filming outside the Pantheon.</span></span> 


<span data-ttu-id="0972b-130">Testamos nosso Rig Homemade ao colocá-lo em Rattlesnake ondulado perto de Seattle, capturando o cenário na parte superior do trilha.</span><span class="sxs-lookup"><span data-stu-id="0972b-130">We tested out our homemade rig by taking it up to Rattlesnake Ridge near Seattle, capturing the scenery at the top of the hike.</span></span> <span data-ttu-id="0972b-131">O resultado, embora seja significativamente menos elegante do que os locais que você vê no HoloTour hoje, nos deu a certeza de que nosso design de Rig era bom o suficiente para que você se sinta realmente lá.</span><span class="sxs-lookup"><span data-stu-id="0972b-131">The result, though significantly less polished than the locations you see in HoloTour today, gave us confidence that our rig design was good enough to make you feel like you’re really there.</span></span>

<span data-ttu-id="0972b-132">Atualizamos nosso Rig de velcro e papel para um invólucro de câmera impresso em 3D e compramos pacotes de bateria externos para que as câmeras GoPro simplifiquem o gerenciamento de bateria.</span><span class="sxs-lookup"><span data-stu-id="0972b-132">We upgraded our rig from Velcro and cardboard to a 3D-printed camera housing and bought external battery packs for the GoPro cameras to simplify battery management.</span></span> <span data-ttu-id="0972b-133">Em seguida, fizemos um teste mais extensivo, viajando até San Francisco para criar um tour em miniatura da costa da cidade e da ponte de porta dourada icônico.</span><span class="sxs-lookup"><span data-stu-id="0972b-133">We then did a more extensive test, traveling down to San Francisco to create a miniature tour of the city’s coast and the iconic Golden Gate bridge.</span></span> <span data-ttu-id="0972b-134">Esse Rig de câmera é o que usamos para a maioria de nossas capturas dos locais que você visita no HoloTour.</span><span class="sxs-lookup"><span data-stu-id="0972b-134">This camera rig is what we used for most of our captures of the locations you visit in HoloTour.</span></span>

![The 360 ° Camera Rig filming em Machu Picchu.](images/camera-machu-pichu-500px.png)

<span data-ttu-id="0972b-136">The 360 ° Camera Rig filming em Machu Picchu.</span><span class="sxs-lookup"><span data-stu-id="0972b-136">The 360° camera rig filming in Machu Picchu.</span></span> 

## <a name="behind-the-scenes"></a><span data-ttu-id="0972b-137">Nos bastidores</span><span class="sxs-lookup"><span data-stu-id="0972b-137">Behind the scenes</span></span>

<span data-ttu-id="0972b-138">Antes de filming, precisávamos descobrir quais locais queríamos incluir em nosso tour virtual.</span><span class="sxs-lookup"><span data-stu-id="0972b-138">Before filming, we needed to figure out which locations we wanted to include on our virtual tour.</span></span> <span data-ttu-id="0972b-139">Roma foi o primeiro local que pretendemos fornecer e queríamos obtê-lo certo, então decidimos fazer uma viagem de protetor com antecedência.</span><span class="sxs-lookup"><span data-stu-id="0972b-139">Rome was the first location we intended to ship and we wanted to get it right, so we decided to do a scouting trip in advance.</span></span> <span data-ttu-id="0972b-140">Enviamos uma equipe de seis pessoas, incluindo artistas, designers e produtores, para uma visita pessoalmente aos sites que estávamos considerando.</span><span class="sxs-lookup"><span data-stu-id="0972b-140">We sent a team of six people—including artists, designers, and producers—for an in-person visit to the sites we were considering.</span></span> <span data-ttu-id="0972b-141">A corrida levou cerca de 9 dias – 2,5 para viagem, o restante para filming.</span><span class="sxs-lookup"><span data-stu-id="0972b-141">The trip took about 9 days – 2.5 for travel, the rest for filming.</span></span> <span data-ttu-id="0972b-142">(Para Machu Picchu, optamos por não fazer uma corrida de atendente, Pesquisar antecipadamente e reservar alguns dias de buffer para filming.)</span><span class="sxs-lookup"><span data-stu-id="0972b-142">(For Machu Picchu we opted not to do a scout trip, researching in advance and booking a few days of buffer for filming.)</span></span>

<span data-ttu-id="0972b-143">Enquanto estiver em Roma, a equipe tirou fotos de cada área e observou fatos interessantes, bem como considerações práticas, como o quão difícil é viajar para cada lugar e quão difícil seria o filme devido a áreas de escalabilidade ou restrições.</span><span class="sxs-lookup"><span data-stu-id="0972b-143">While in Rome, the team took photos of each area and noted interesting facts as well as practical considerations, such as how hard it is to travel to each spot and how difficult it would be to film because of crowds or restrictions.</span></span> <span data-ttu-id="0972b-144">Isso pode parecer uma férias, mas é muito trabalho.</span><span class="sxs-lookup"><span data-stu-id="0972b-144">This may sound like a vacation, but it’s a lot of work.</span></span> <span data-ttu-id="0972b-145">Os dias começaram desde a manhã e não vão parar até a noite.</span><span class="sxs-lookup"><span data-stu-id="0972b-145">Days started early in the morning and would go non-stop until evening.</span></span> <span data-ttu-id="0972b-146">Toda noite, a seqüência foi carregada para a equipe de volta em Seattle para revisão.</span><span class="sxs-lookup"><span data-stu-id="0972b-146">Each night, footage was uploaded for the team back in Seattle to review.</span></span> 

![Nosso equipe de captura em Roma.](images/holotour-filming-crew-rome-500px.jpg) 

<span data-ttu-id="0972b-148">Nosso equipe de captura em Roma.</span><span class="sxs-lookup"><span data-stu-id="0972b-148">Our capture crew in Rome.</span></span> 


<span data-ttu-id="0972b-149">Após a conclusão da corrida do Scout, foi feito um plano final para filming reais.</span><span class="sxs-lookup"><span data-stu-id="0972b-149">After the scout trip was completed, a final plan was made for actual filming.</span></span> <span data-ttu-id="0972b-150">Isso exigia uma lista detalhada de onde vamos fazer um filme, em que dia e em que hora.</span><span class="sxs-lookup"><span data-stu-id="0972b-150">This required a detailed list of where we were going to film, on what day, and at what time.</span></span> <span data-ttu-id="0972b-151">Todos os dias no exterior são caros, portanto, essas viagens precisavam ser eficientes.</span><span class="sxs-lookup"><span data-stu-id="0972b-151">Every day overseas is expensive, so these trips needed to be efficient.</span></span> <span data-ttu-id="0972b-152">Nós registramos guias e manipuladores em Roma para nos ajudar e a usar totalmente todos os dias, desde o nascer até o pôr do sol.</span><span class="sxs-lookup"><span data-stu-id="0972b-152">We booked guides and handlers in Rome to help us and fully used every day from before sunrise to after sunset.</span></span> <span data-ttu-id="0972b-153">É necessário obter a melhor seqüência possível para que você se sinta lá mesmo.</span><span class="sxs-lookup"><span data-stu-id="0972b-153">We need to get the best footage possible in order to make you feel like you’re really there.</span></span>

### <a name="capturing-the-video"></a><span data-ttu-id="0972b-154">Capturando o vídeo</span><span class="sxs-lookup"><span data-stu-id="0972b-154">Capturing the video</span></span>

<span data-ttu-id="0972b-155">Fazer algumas coisas simples durante a captura pode tornar o pós-processamento muito mais fácil.</span><span class="sxs-lookup"><span data-stu-id="0972b-155">Doing a few simple things during capture can make post-processing much easier.</span></span> <span data-ttu-id="0972b-156">Por exemplo, sempre que unir imagens de várias câmeras, você acabará com os artefatos visuais, pois cada câmera tem uma exibição um pouco diferente.</span><span class="sxs-lookup"><span data-stu-id="0972b-156">For example, whenever you stitch together images from multiple cameras, you end up with visual artifacts because each camera has a slightly different view.</span></span> <span data-ttu-id="0972b-157">Os objetos mais próximos são a câmera, quanto maior a diferença entre as exibições e quanto maior os artefatos de costura serão.</span><span class="sxs-lookup"><span data-stu-id="0972b-157">The closer objects are to the camera, the larger the difference between the views, and the larger the stitching artifacts will be.</span></span> <span data-ttu-id="0972b-158">Aqui está uma maneira fácil de visualizar o problema: Mantenha seu polegar na frente do seu rosto e examine-o com apenas um olho.</span><span class="sxs-lookup"><span data-stu-id="0972b-158">Here's an easy way to visualize the problem: hold your thumb up in front of your face and look at it with only one eye.</span></span> <span data-ttu-id="0972b-159">Agora, mude os olhos.</span><span class="sxs-lookup"><span data-stu-id="0972b-159">Now switch eyes.</span></span> <span data-ttu-id="0972b-160">Você verá que seu thumb parece se mover em relação ao plano de fundo.</span><span class="sxs-lookup"><span data-stu-id="0972b-160">You’ll see that your thumb appears to move relative to the background.</span></span> <span data-ttu-id="0972b-161">Se você mantiver seu polegar mais longe de seu rosto e repetir o experimento, seu thumb parecerá ser movido para menos.</span><span class="sxs-lookup"><span data-stu-id="0972b-161">If you hold your thumb further away from your face and repeat the experiment, your thumb will appear to move less.</span></span> <span data-ttu-id="0972b-162">Esse movimento aparente é semelhante ao problema de junção que enfrentamos: seus olhos, como nossas câmeras, não veem exatamente a mesma imagem porque elas são separadas por uma pequena distância.</span><span class="sxs-lookup"><span data-stu-id="0972b-162">That apparent movement is similar to the stitching problem we faced: Your eyes, like our cameras, don’t see the exact same image because they are separated by a little distance.</span></span>

<span data-ttu-id="0972b-163">Como é muito mais fácil evitar os piores artefatos enquanto filming do que é necessário corrigi-los no pós-processamento, tentamos manter as pessoas e as coisas longe da câmera na esperança que poderíamos eliminar a necessidade de unir objetos de fechamento.</span><span class="sxs-lookup"><span data-stu-id="0972b-163">Because it’s much easier to prevent the worst artifacts while filming than it is to correct them in post-processing, we tried to keep people and things far away from the camera in the hopes we could eliminate the need to stitch close-up objects.</span></span> <span data-ttu-id="0972b-164">A manutenção de uma grande limpeza em nossa câmera era provavelmente um dos maiores desafios que tínhamos durante a solução e tivemos que fazer com que ela funcione.</span><span class="sxs-lookup"><span data-stu-id="0972b-164">Maintaining a large clearing around our camera was probably one of the biggest challenges we had during shooting and we had to get creative to make it work.</span></span> <span data-ttu-id="0972b-165">Trabalhar com guias locais foi uma enorme ajuda no gerenciamento de áreas de trabalho, mas também descobrimos que o uso de sinais — e, às vezes, pequenos coness ou de bolsas de Beans — para marcar nosso espaço de filming era razoavelmente eficaz, especialmente porque só precisávamos obter uma pequena quantidade de imagens em cada local.</span><span class="sxs-lookup"><span data-stu-id="0972b-165">Working with local guides was a huge help in managing crowds, but we also found that using signs—and sometimes small cones or bean bags—to mark our filming space was reasonably effective, especially since we only needed to get a short amount of footage at each location.</span></span> <span data-ttu-id="0972b-166">Geralmente, a melhor maneira de obter uma boa captura era apenas chegar muito cedo na manhã, antes que a maioria das pessoas fosse mostrada.</span><span class="sxs-lookup"><span data-stu-id="0972b-166">Often the best way to get a good capture was to just to arrive very early in the morning, before most people showed up.</span></span>

<span data-ttu-id="0972b-167">Algumas outras técnicas de captura úteis vêm diretamente de práticas de filme tradicionais.</span><span class="sxs-lookup"><span data-stu-id="0972b-167">Some other useful capture techniques come straight from traditional film practices.</span></span> <span data-ttu-id="0972b-168">Por exemplo, usamos um cartão de correção de cor em todas as nossas câmeras e capturamos fotos de referência de texturas e objetos que talvez sejam necessários mais tarde.</span><span class="sxs-lookup"><span data-stu-id="0972b-168">For example, we used a color correction card on all of our cameras and captured reference photos of textures and objects we might need later.</span></span> 

![Um corte áspero de Machu Picchu mostrando o cartão de correção de cor.](images/rough-cut-machu-picchu-500px.png)

<span data-ttu-id="0972b-170">Um corte aproximado da Pantheon de imagens antes de unir.</span><span class="sxs-lookup"><span data-stu-id="0972b-170">A rough cut of Pantheon footage before stitching.</span></span>

### <a name="processing-the-video"></a><span data-ttu-id="0972b-171">Processando o vídeo</span><span class="sxs-lookup"><span data-stu-id="0972b-171">Processing the video</span></span>

<span data-ttu-id="0972b-172">Capturar o conteúdo de 360 ° é apenas a primeira etapa — é necessário muito processamento para converter a seqüência bruta da câmera que capturamos nos ativos finais que você vê em HoloTour.</span><span class="sxs-lookup"><span data-stu-id="0972b-172">Capturing 360° content is only the first step—a lot of processing is needed to convert the raw camera footage we captured into the final assets you see in HoloTour.</span></span> <span data-ttu-id="0972b-173">Depois de voltar, precisamos pegar o vídeo de 14 feeds de câmera diferentes e transformá-lo em um único vídeo contínuo com artefatos mínimos.</span><span class="sxs-lookup"><span data-stu-id="0972b-173">Once we were back home we needed to take the video from 14 different camera feeds and turn it into a single continuous video with minimal artifacts.</span></span> <span data-ttu-id="0972b-174">Nossa equipe de arte usou várias ferramentas para combinar e aprimorar a seqüência capturada e desenvolvemos um pipeline para otimizar o processamento o máximo possível.</span><span class="sxs-lookup"><span data-stu-id="0972b-174">Our art team used a number of tools to combine and polish the captured footage and we developed a pipeline to optimize the processing as much as possible.</span></span> <span data-ttu-id="0972b-175">A seqüência tinha que ser juntada, corrigida por cor e, em seguida, compostada para remover elementos e artefatos de distração ou para adicionar bolsos suplementares de vida e movimento, tudo com o objetivo de aprimorar essa sensação de realmente estar lá.</span><span class="sxs-lookup"><span data-stu-id="0972b-175">The footage had to be stitched together, color corrected, and then composited to remove distracting elements and artifacts or to add supplemental pockets of life and motion, all with the goal to enhance that feeling of actually being there.</span></span>

![Um corte aproximado da Pantheon de imagens antes de unir.](images/rough-cut-pantheon-500px.png)

<span data-ttu-id="0972b-177">Um corte aproximado da Pantheon de imagens antes de unir.</span><span class="sxs-lookup"><span data-stu-id="0972b-177">A rough cut of Pantheon footage before stitching.</span></span> 


<span data-ttu-id="0972b-178">Para unir os vídeos, usamos uma ferramenta chamada [PTGui](https://www.ptgui.com/) e a integro ao nosso pipeline de processamento.</span><span class="sxs-lookup"><span data-stu-id="0972b-178">To stitch the videos together, we used a tool called [PTGui](https://www.ptgui.com/) and integrated it into our processing pipeline.</span></span> <span data-ttu-id="0972b-179">Como parte do pós-processamento, extraímos os quadros de nossos vídeos e encontramos um padrão de costura que parecia bom para um desses quadros.</span><span class="sxs-lookup"><span data-stu-id="0972b-179">As part of post-processing we extracted still frames from our videos and found a stitching pattern that looked good for one of those frames.</span></span> <span data-ttu-id="0972b-180">Em seguida, aplicamos esse padrão a um plug-in personalizado que escrevemos, que permitia que nossos artistas de vídeo ajustassem e ajustassem o padrão de costura diretamente durante a composição nos efeitos após.</span><span class="sxs-lookup"><span data-stu-id="0972b-180">We then applied that pattern to a custom plugin we wrote that allowed our video artists to fine tune and tweak the stitching pattern directly while compositing in After Effects.</span></span> 

![Captura de tela de PTGui mostrando a seqüência de Pantheon costurada.](images/stitching-tool-pantheon-500px.png)

<span data-ttu-id="0972b-182">Captura de tela de PTGui mostrando a seqüência de Pantheon costurada.</span><span class="sxs-lookup"><span data-stu-id="0972b-182">Screenshot of PTGui showing the stitched Pantheon footage.</span></span> 


### <a name="video-playback"></a><span data-ttu-id="0972b-183">Reprodução de vídeo</span><span class="sxs-lookup"><span data-stu-id="0972b-183">Video playback</span></span>

<span data-ttu-id="0972b-184">Após a conclusão do processamento da seqüência de imagens, temos um vídeo contínuo, mas ele é extremamente grande, em vez de resolução de 8K.</span><span class="sxs-lookup"><span data-stu-id="0972b-184">After processing of the footage is completed, we have a seamless video but it’s extraordinarily large—around 8K resolution.</span></span> <span data-ttu-id="0972b-185">A decodificação de vídeo é cara e há poucos computadores que podem lidar com um vídeo de 8K, de modo que o próximo desafio estava encontrando uma forma de reproduzir esse vídeo no HoloLens.</span><span class="sxs-lookup"><span data-stu-id="0972b-185">Decoding video is expensive and there are very few computers that can handle an 8K video so the next challenge was finding a way to play this video back on HoloLens.</span></span> <span data-ttu-id="0972b-186">Desenvolvemos várias estratégias para evitar o custo da decodificação enquanto o usuário parece que estava exibindo todo o vídeo.</span><span class="sxs-lookup"><span data-stu-id="0972b-186">We developed a number of strategies to avoid the cost of decoding while still making the user feel like they were viewing the entire video.</span></span>

<span data-ttu-id="0972b-187">A otimização mais fácil é evitar a decodificação de partes do vídeo que não mudam muito.</span><span class="sxs-lookup"><span data-stu-id="0972b-187">The easiest optimization is to avoid decoding parts of the video that don’t change much.</span></span> <span data-ttu-id="0972b-188">Escrevemos uma ferramenta para identificar áreas em cada cena que têm pouco ou nenhum movimento.</span><span class="sxs-lookup"><span data-stu-id="0972b-188">We wrote a tool to identify areas in each scene that have little or no motion.</span></span> <span data-ttu-id="0972b-189">Para essas regiões, mostramos uma imagem estática em vez de decodificar um vídeo em cada quadro.</span><span class="sxs-lookup"><span data-stu-id="0972b-189">For those regions we show a static image rather than decoding a video each frame.</span></span> <span data-ttu-id="0972b-190">Para tornar isso possível, dividimos o grande vídeo em partes muito menores.</span><span class="sxs-lookup"><span data-stu-id="0972b-190">To make this possible, we divided up the massive video into much smaller chunks.</span></span>

<span data-ttu-id="0972b-191">Também garantimos que todos os pixels decodificados foram usados com mais eficiência.</span><span class="sxs-lookup"><span data-stu-id="0972b-191">We also made sure that every pixel we decoded was used most effectively.</span></span> <span data-ttu-id="0972b-192">Experimentamos as técnicas de compactação para diminuir o tamanho do vídeo; Dividimos as regiões de vídeo de acordo com os polígonos da geometria em que ela seria projetada; ajustamos o UVs e reempacotamos os vídeos com base na quantidade de detalhes de polígonos diferentes incluídos.</span><span class="sxs-lookup"><span data-stu-id="0972b-192">We experimented with compression techniques to lower the size of the video; we split the video regions according to the polygons of the geometry it would be projected onto; we adjusted UVs and repacked the videos based on how much detail different polygons included.</span></span> <span data-ttu-id="0972b-193">O resultado desse trabalho é que o que começou como um vídeo único de 8K se transformou em muitas partes que parecem quase ininteligível até que sejam reformuladas corretamente na cena.</span><span class="sxs-lookup"><span data-stu-id="0972b-193">The result of this work is that what started as a single 8k video turned into many chunks that look almost unintelligible until they are properly re-projected into the scene.</span></span> <span data-ttu-id="0972b-194">Para um desenvolvedor de jogos que entenda o mapeamento de textura e a embalagem UV, isso provavelmente será familiar.</span><span class="sxs-lookup"><span data-stu-id="0972b-194">For a game developer who understands texture mapping and UV packing, this will probably look familiar.</span></span> 

![Uma exibição completa do Pantheon antes das otimizações.](images/pantheon-before-optimization-500px.png) 

<span data-ttu-id="0972b-196">Uma exibição completa do Pantheon antes das otimizações.</span><span class="sxs-lookup"><span data-stu-id="0972b-196">A full view of the Pantheon before optimizations.</span></span> 


![A metade direita do Pantheon, processada para reprodução de vídeo.](images/pantheon-process-video-playback-500px.png) 

<span data-ttu-id="0972b-198">A metade direita do Pantheon, processada para reprodução de vídeo.</span><span class="sxs-lookup"><span data-stu-id="0972b-198">The right half of the Pantheon, processed for video playback.</span></span> 


![Exemplo de uma única região de vídeo após a otimização e a embalagem.](images/single-video-region-after-optimization-500px.png) 

<span data-ttu-id="0972b-200">Exemplo de uma única região de vídeo após a otimização e a embalagem.</span><span class="sxs-lookup"><span data-stu-id="0972b-200">Example of a single video region after optimization and packing.</span></span> 


<span data-ttu-id="0972b-201">Outro truque que usamos foi para evitar a decodificação de vídeo que você não está visualizando ativamente.</span><span class="sxs-lookup"><span data-stu-id="0972b-201">Another trick we used was to avoid decoding video you aren’t actively viewing.</span></span> <span data-ttu-id="0972b-202">Enquanto estiver no HoloTour, você só poderá ver parte da cena completa em um determinado momento.</span><span class="sxs-lookup"><span data-stu-id="0972b-202">While in HoloTour, you can only see part of the full scene at any given moment.</span></span> <span data-ttu-id="0972b-203">Decodificamos apenas vídeos dentro ou logo fora do campo de exibição (FOV).</span><span class="sxs-lookup"><span data-stu-id="0972b-203">We only decode videos within or shortly outside of your field of view (FOV).</span></span> <span data-ttu-id="0972b-204">Ao girar sua cabeça, começamos a jogar as regiões do vídeo que agora estão em sua FOV e param de executá-las que não estão mais dentro dela.</span><span class="sxs-lookup"><span data-stu-id="0972b-204">As you rotate your head, we start playing the regions of the video that are now in your FOV and stop playing ones that are no longer within it.</span></span> <span data-ttu-id="0972b-205">A maioria das pessoas nem mesmo perceberá que isso está acontecendo, mas se você virar rapidamente, verá que o vídeo leva um segundo para começar – enquanto isso, você verá uma imagem estática que, em seguida, esmaecerá para o vídeo quando ele estiver pronto.</span><span class="sxs-lookup"><span data-stu-id="0972b-205">Most people won’t even notice this is happening, but if you turn around rapidly, you’ll see the video takes a second to start— in the meantime you’ll see a static image which then fades back to video once it’s ready.</span></span>

<span data-ttu-id="0972b-206">Para fazer essa estratégia funcionar, desenvolvemos um sistema de reprodução de vídeo extensivo.</span><span class="sxs-lookup"><span data-stu-id="0972b-206">To make this strategy work we developed an extensive video playback system.</span></span> <span data-ttu-id="0972b-207">Otimizamos o código de reprodução de nível baixo para tornar a alternância de vídeo extremamente eficiente.</span><span class="sxs-lookup"><span data-stu-id="0972b-207">We optimized the low level playback code in order to make video switching extremely efficient.</span></span> <span data-ttu-id="0972b-208">Além disso, tivemos que codificar nossos vídeos de forma especial para tornar possível alternar rapidamente para qualquer vídeo a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="0972b-208">Additionally, we had to encode our videos in a special way to make it possible to rapidly switch to any video at any time.</span></span> <span data-ttu-id="0972b-209">Esse pipeline de reprodução levou uma quantidade significativa de tempo de desenvolvimento para que possamos implementá-lo em estágios.</span><span class="sxs-lookup"><span data-stu-id="0972b-209">This playback pipeline took a significant amount of development time so we implemented it in stages.</span></span> <span data-ttu-id="0972b-210">Começamos com um sistema mais simples, que era menos eficiente, mas permitia designers e artistas para trabalhar na experiência e o melhorou lentamente para um sistema de reprodução mais robusto que nos permitia remeter na barra de qualidade final.</span><span class="sxs-lookup"><span data-stu-id="0972b-210">We started with a simpler system that was less efficient, but allowed designers and artists to work on the experience, and slowly improved it to a more robust playback system that allowed us to ship at the final quality bar.</span></span> <span data-ttu-id="0972b-211">Esse sistema final tinha ferramentas personalizadas que criamos no Unity para configurar o vídeo dentro da cena e monitorar o mecanismo de reprodução.</span><span class="sxs-lookup"><span data-stu-id="0972b-211">This final system had custom tools we created within Unity to set up the video within the scene and monitor the playback engine.</span></span>

### <a name="recreating-near-space-objects-in-3d"></a><span data-ttu-id="0972b-212">Recriando objetos Near-Space em 3D</span><span class="sxs-lookup"><span data-stu-id="0972b-212">Recreating near-space objects in 3D</span></span>

<span data-ttu-id="0972b-213">Os vídeos compõem a maior parte do que você vê em HoloTour, mas há uma série de objetos 3D que aparecem perto de você, como a pintura em Piazza Navona, a Fountain fora do Pantheon ou o balão de ar quente no qual você se destaca para cenas aéreas.</span><span class="sxs-lookup"><span data-stu-id="0972b-213">Videos make up the majority of what you see in HoloTour, but there are a number of 3D objects that appear close to you, such as the painting in Piazza Navona, the fountain outside the Pantheon, or the hot air balloon you stand in for aerial scenes.</span></span> <span data-ttu-id="0972b-214">Esses objetos 3D são importantes porque a percepção de profundidade humana está muito próxima, mas não muito bem longe.</span><span class="sxs-lookup"><span data-stu-id="0972b-214">These 3D objects are important because human depth perception is very good up close, but not very good far away.</span></span> <span data-ttu-id="0972b-215">Podemos ficar com o vídeo à distância, mas para permitir que os usuários percorram seu espaço e pareçam que estão realmente lá, os objetos próximos precisam de profundidade.</span><span class="sxs-lookup"><span data-stu-id="0972b-215">We can get away with video in the distance, but to allow users to walk around their space and feel like they’re really there, nearby objects need depth.</span></span> <span data-ttu-id="0972b-216">Essa técnica é semelhante ao tipo de coisa que você pode ver em um museu de história natural — imagem a diorama que tem Landscaping físico, plantas e animais de Specimens em primeiro plano, mas se reprevalece em uma pintura fosca com máscara inteligente em segundo plano.</span><span class="sxs-lookup"><span data-stu-id="0972b-216">This technique is similar to the sort of thing you might see in a natural history museum—picture a diorama that has physical landscaping, plants, and animal specimens in the foreground, but recedes into a cleverly masked matte painting in the background.</span></span>

<span data-ttu-id="0972b-217">Alguns objetos são simplesmente ativos 3D que criamos e adicionamos à cena para aprimorar a experiência.</span><span class="sxs-lookup"><span data-stu-id="0972b-217">Some objects are simply 3D assets we created and added to the scene to enhance the experience.</span></span> <span data-ttu-id="0972b-218">A pintura e o balão de ar quente se enquadram nessa categoria porque não estavam presentes quando nos refilmemos.</span><span class="sxs-lookup"><span data-stu-id="0972b-218">The painting and the hot air balloon fall into this category because they weren’t present when we filmed.</span></span> <span data-ttu-id="0972b-219">Semelhante aos ativos de jogos, eles foram criados por um artista 3D em nossa equipe e texturizados adequadamente.</span><span class="sxs-lookup"><span data-stu-id="0972b-219">Similar to game assets, they were created by a 3D artist on our team and textured appropriately.</span></span> <span data-ttu-id="0972b-220">Nós os colocamos em nossas cenas perto de onde você tem, e o mecanismo de jogo pode renderizá-los para os dois HoloLenss exibidos para que eles apareçam como um objeto 3D.</span><span class="sxs-lookup"><span data-stu-id="0972b-220">We place these in our scenes near where you stand, and the game engine can render them to the two HoloLens displays so that they appear as a 3D object.</span></span>

<span data-ttu-id="0972b-221">Outros ativos, como o Fountain fora do Pantheon, são objetos reais que existem nos locais onde estamos capturando vídeo, mas para trazer esses objetos do vídeo e para o 3D, temos que fazer várias coisas.</span><span class="sxs-lookup"><span data-stu-id="0972b-221">Other assets, like the fountain outside the Pantheon, are real objects that exist in the locations where we're shooting video, but to bring these objects out of the video and into 3D, we have to do a number of things.</span></span>

<span data-ttu-id="0972b-222">Primeiro, precisamos de informações adicionais sobre cada objeto.</span><span class="sxs-lookup"><span data-stu-id="0972b-222">First, we need additional information about each object.</span></span> <span data-ttu-id="0972b-223">Enquanto estiver no local para filming, nossa equipe capturou uma grande quantidade de seqüências de referência desses objetos para que possamos ter imagens detalhadas suficientes para recriar as texturas com precisão.</span><span class="sxs-lookup"><span data-stu-id="0972b-223">While on location for filming, our team captured a lot of reference footage of these objects so that we would have enough detailed images to accurately recreate the textures.</span></span> <span data-ttu-id="0972b-224">A equipe também realizou uma verificação de [Photogrammetry](https://en.wikipedia.org/wiki/Photogrammetry) , que constrói um modelo 3D de dezenas de imagens 2D, dando-nos um modelo aproximado do objeto em escala perfeita.</span><span class="sxs-lookup"><span data-stu-id="0972b-224">The team also performed a [photogrammetry](https://en.wikipedia.org/wiki/Photogrammetry) scan, which constructs a 3D model from dozens of 2D images, giving us a rough model of the object at perfect scale.</span></span>

<span data-ttu-id="0972b-225">À medida que processamos nossa seqüência, os objetos que posteriormente serão substituídos por uma representação 3D serão removidos do vídeo.</span><span class="sxs-lookup"><span data-stu-id="0972b-225">As we process our footage, objects that will later be replaced with a 3D representation are removed from the video.</span></span> <span data-ttu-id="0972b-226">O ativo 3D é baseado no modelo Photogrammetry, mas limpo e simplificado por nossos artistas.</span><span class="sxs-lookup"><span data-stu-id="0972b-226">The 3D asset is based on the photogrammetry model but cleaned up and simplified by our artists.</span></span> <span data-ttu-id="0972b-227">Para alguns objetos, podemos usar partes do vídeo — como a textura de água no Fountain — mas a maior parte do Fountain agora é um objeto 3D, que permite aos usuários perceber a profundidade e acompanhá-lo em um espaço limitado na experiência.</span><span class="sxs-lookup"><span data-stu-id="0972b-227">For some objects, we can use parts of the video—such as the water texture on the fountain—but most of the fountain is now a 3D object, which allows users to perceive depth and walk around it in a limited space in the experience.</span></span> <span data-ttu-id="0972b-228">Ter objetos quase de espaço como esse aumenta muito a sensação de realm e ajuda a aterrar os usuários no local virtual.</span><span class="sxs-lookup"><span data-stu-id="0972b-228">Having near-space objects like this greatly adds to the sense of realism and helps to ground the users in the virtual location.</span></span> 

![Pantheon de seqüência com o Fountain removido.](images/object-removal-pantheon-500px.png)

<span data-ttu-id="0972b-231">Pantheon de seqüência com o Fountain removido.</span><span class="sxs-lookup"><span data-stu-id="0972b-231">Pantheon footage with the fountain removed.</span></span> <span data-ttu-id="0972b-232">Ele será substituído por um ativo 3D.</span><span class="sxs-lookup"><span data-stu-id="0972b-232">It will be replaced with a 3D asset.</span></span>


## <a name="final-thoughts"></a><span data-ttu-id="0972b-233">Considerações finais</span><span class="sxs-lookup"><span data-stu-id="0972b-233">Final thoughts</span></span>

<span data-ttu-id="0972b-234">Obviamente, houve mais para criar esse conteúdo do que o que discutimos aqui.</span><span class="sxs-lookup"><span data-stu-id="0972b-234">Obviously, there was more to creating this content than what we've discussed here.</span></span> <span data-ttu-id="0972b-235">Há algumas cenas – gostaríamos de chamá-las de "perspectivas impossíveis", incluindo a jornada de balões de ar quente e a luta Gladiator no Colosseum, que adotou uma abordagem mais criativa.</span><span class="sxs-lookup"><span data-stu-id="0972b-235">There are a few scenes—we like to call them "impossible perspectives"—including the hot air balloon ride and the gladiator fight in the Colosseum, which took a more creative approach.</span></span> <span data-ttu-id="0972b-236">Vamos solucioná-los em um estudo de caso futuro.</span><span class="sxs-lookup"><span data-stu-id="0972b-236">We'll address these in a future case study.</span></span>

<span data-ttu-id="0972b-237">Esperamos que o compartilhamento de soluções para alguns dos maiores desafios que tínhamos durante a produção seja útil para outros desenvolvedores e que você tenha inspirado o uso de algumas dessas técnicas para criar suas próprias experiências de imersão para o HoloLens.</span><span class="sxs-lookup"><span data-stu-id="0972b-237">We hope that sharing solutions to some of the bigger challenges we had during production is helpful to other developers and that you're inspired to use some of these techniques to create your own immersive experiences for HoloLens.</span></span> <span data-ttu-id="0972b-238">(E, se você fizer isso, certifique-se de compartilhá-lo conosco no [Fórum de desenvolvimento de aplicativos do HoloLens](https://forums.hololens.com/)!)</span><span class="sxs-lookup"><span data-stu-id="0972b-238">(And if you do, please make sure to share it with us on the [HoloLens App Development forum](https://forums.hololens.com/)!)</span></span>

## <a name="about-the-authors"></a><span data-ttu-id="0972b-239">Sobre os autores</span><span class="sxs-lookup"><span data-stu-id="0972b-239">About the authors</span></span>

<table style="border:0">
<tr>
<td style="border:0" width="60px"> <img alt="David Haley" width="60" height="60" src="images/haley.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="0972b-240"><b>David Haley</b> é desenvolvedor sênior que aprendeu mais sobre a câmera Rigs e reprodução de vídeo do que achou possível de trabalhar em HoloTour.</span><span class="sxs-lookup"><span data-stu-id="0972b-240"><b>David Haley</b> is a Senior Developer who learned more about camera rigs and video playback than he thought possible from working on HoloTour.</span></span></td>
<td style="border:0" width="60px"> <img alt="Danny Askew" width="60" height="60" src="images/askew.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="0972b-241"><b>Danny Askew</b> é um artista de vídeo que se certificava de que sua jornada por Roma foi o mais perfeita possível.</span><span class="sxs-lookup"><span data-stu-id="0972b-241"><b>Danny Askew</b> is a Video Artist who made sure your journey through Rome was as flawless as possible.</span></span></td>
</tr>
<tr>
<td style="border:0" width="60px"> <img alt="Jason Syltebo" width="60" height="60" src="images/syltebo.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="0972b-242"><b>Jason Syltebo</b> é um designer de áudio que garantiu que você pudesse experimentar o soundscape de todos os destinos visitados, mesmo quando volta a usar o tempo.</span><span class="sxs-lookup"><span data-stu-id="0972b-242"><b>Jason Syltebo</b> is an Audio Designer who made sure you could experience the soundscape of every destination you visit, even when you go back in time.</span></span></td>
<td style="border:0" width="60px"> <img alt="Travis Steiner" width="60" height="60" src="images/steiner.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="0972b-243"><b>Travis Steiner</b> é diretor de design que pesquisava e reprotetorou locais, criou planos de viagem e direcionou filming no site.</span><span class="sxs-lookup"><span data-stu-id="0972b-243"><b>Travis Steiner</b> is a Design Director who researched and scouted locations, created trip plans, and directed filming on site.</span></span></td>
</tr>
</table>



## <a name="see-also"></a><span data-ttu-id="0972b-244">Consulte também</span><span class="sxs-lookup"><span data-stu-id="0972b-244">See also</span></span>
* [<span data-ttu-id="0972b-245">Vídeo: Microsoft HoloLens: HoloTour</span><span class="sxs-lookup"><span data-stu-id="0972b-245">Video: Microsoft HoloLens: HoloTour</span></span>](https://www.youtube.com/watch?v=pLd9WPlaMpY)
